webpackJsonp([14],{"/Ie8":function(e,t){},JFvG:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Xxa5"),s=r.n(a),i=r("exGp"),o=r.n(i),n=r("RwfU"),c={name:"resetPwdForm",data:function(){var e=this;return{active:0,emailFormRules:{user_id:[{required:!0,message:"请输入用户账号",trigger:"blur"}],auth_code:[{required:!0,min:4,max:4,message:"请输入4位验证码",trigger:"blur"}]},flag:!1,msg:"获取邮箱验证码",emailForm:{user_id:"",auth_code:""},forgotPasswordForm:{pwd:"",confirmPwd:""},forgotPasswordFormRules:{pwd:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"长度在6-16位之间",trigger:"blur"},{pattern:/^(?=.*[0-9].*)(?=.*[A-Z].*)(?=.*[a-z].*).{6,16}$/,message:"密码为6-16位大小写字母+数字组合，请重新输入",trigger:"blur"}],confirmPwd:[{required:!0,message:"请输入确认密码",trigger:"blur"},{validator:function(t,r,a){r!==e.forgotPasswordForm.pwd?a(new Error("两次输入密码不一致,请重新输入")):a()},trigger:"blur"},{min:6,max:16,message:"长度在6-16位之间",trigger:"blur"},{pattern:/^(?=.*[0-9].*)(?=.*[A-Z].*)(?=.*[a-z].*).{6,16}$/,message:"密码为6-16位大小写字母+数字组合，请重新输入",trigger:"blur"}]}}},methods:{next:function(){this.active++>2&&(this.active=0)},getAuthCode:function(){var e=this;this.$refs.emailForm.validateField("user_id",function(t){if(t)return!1;var r=e;e.flag=!0;var a=150,s=null;s=setInterval(function(){0===a?(r.msg="重新获取验证码",r.flag=!1,clearInterval(s)):(r.msg=a+"秒后重新获取",a--)},1e3),e.$http.post("api/user/check",{},{params:{user_id:e.emailForm.user_id}}).then(function(t){200===t.data.code&&e.$message.success("验证码已发送")}).catch(function(e){Object(n.a)(e.message)})})},checkEmail:function(){var e,t=this;this.$refs.emailForm.validate((e=o()(s.a.mark(function e(r){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,t.$http.post("api/email/check",t.emailForm);case 5:200!==(a=e.sent).data.code?Object(n.a)(a.data.msg):t.active++,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),Object(n.a)(e.t0.message);case 12:case"end":return e.stop()}},e,t,[[2,9]])})),function(t){return e.apply(this,arguments)}))},resetPassword:function(){var e,t=this;this.$refs.forgotPasswordForm.validate((e=o()(s.a.mark(function e(r){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,t.$http.post("api/pwd/reset",{user_id:t.emailForm.user_id,user_pwd:t.forgotPasswordForm.pwd});case 5:return a=e.sent,e.next=8,a;case 8:if(e.t0=e.sent.data.code,200===e.t0){e.next=13;break}Object(n.a)(a.data.msg),e.next=14;break;case 13:t.active++;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),Object(n.a)(e.t1.message);case 19:case"end":return e.stop()}},e,t,[[2,16]])})),function(t){return e.apply(this,arguments)}))}}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-container"},[r("div",{staticClass:"forgot-password"},[r("el-button",{directives:[{name:"show",rawName:"v-show",value:e.active>=1,expression:"active>= 1"}],staticClass:"return-page-wr",attrs:{type:"text"},on:{click:function(t){e.active--}}},[r("i",{staticClass:"el-icon-arrow-left"}),e._v(" 上一步\n    ")]),e._v(" "),r("el-button",{directives:[{name:"show",rawName:"v-show",value:0===e.active,expression:"active=== 0"}],staticClass:"return-page-wr",attrs:{type:"text"},on:{click:function(t){return e.$router.push({path:"/"})}}},[r("i",{staticClass:"el-icon-arrow-left"}),e._v(" 返回\n    ")]),e._v(" "),r("div",{staticClass:"content"},[r("el-steps",{attrs:{active:e.active,"finish-status":"success","align-center":""}},[r("el-step",{attrs:{title:"账号验证"}}),e._v(" "),r("el-step",{attrs:{title:"重置密码"}}),e._v(" "),r("el-step",{attrs:{title:"完成设置"}})],1),e._v(" "),0===e.active?r("div",[r("el-form",{ref:"emailForm",attrs:{model:e.emailForm,rules:e.emailFormRules}},[r("el-form-item",{attrs:{prop:"user_id"}},[r("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.emailForm.user_id,callback:function(t){e.$set(e.emailForm,"user_id",t)},expression:"emailForm.user_id"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"auth_code"}},[r("el-input",{attrs:{placeholder:"邮箱验证码"},model:{value:e.emailForm.auth_code,callback:function(t){e.$set(e.emailForm,"auth_code",t)},expression:"emailForm.auth_code"}},[r("template",{slot:"append"},[r("el-button",{staticStyle:{width:"120px"},attrs:{size:"small",plain:"",disabled:e.flag},on:{click:e.getAuthCode}},[e._v(e._s(e.msg)+"\n                ")])],1)],2)],1)],1),e._v(" "),r("div",[r("el-button",{staticClass:"login-btn",attrs:{type:"success"},on:{click:e.checkEmail}},[e._v("下一步")])],1)],1):e._e(),e._v(" "),1===e.active?r("div",[r("el-form",{key:"resetForm",ref:"forgotPasswordForm",attrs:{model:e.forgotPasswordForm,rules:e.forgotPasswordFormRules}},[r("el-form-item",{key:"0",attrs:{prop:"pwd",label:"密码:"}},[r("el-input",{attrs:{clearable:"",type:"password",placeholder:"6-16位大写字母+小写字母+数字组合","auto-complete":"off"},model:{value:e.forgotPasswordForm.pwd,callback:function(t){e.$set(e.forgotPasswordForm,"pwd",t)},expression:"forgotPasswordForm.pwd"}})],1),e._v(" "),r("el-form-item",{key:"1",attrs:{prop:"confirmPwd",label:"确认密码:"}},[r("el-input",{attrs:{clearable:"",placeholder:"重复密码",type:"password"},model:{value:e.forgotPasswordForm.confirmPwd,callback:function(t){e.$set(e.forgotPasswordForm,"confirmPwd",t)},expression:"forgotPasswordForm.confirmPwd"}})],1)],1),e._v(" "),r("div",{staticClass:"btn-wr"},[r("el-button",{staticClass:"login-btn",attrs:{type:"success"},on:{click:function(t){return t.preventDefault(),e.resetPassword.apply(null,arguments)}}},[e._v("确定")])],1)],1):e._e(),e._v(" "),2===e.active?r("div",[r("div",{staticClass:"reset-success"},[r("el-result",{attrs:{icon:"success",title:"修改密码成功",subTitle:"请重新登录"}},[r("template",{slot:"extra"},[r("div",{staticClass:"btn-wr"},[r("el-button",{staticClass:"login-btn",attrs:{type:"success"},on:{click:function(t){return e.$router.push({path:"/"})}}},[e._v("登录")])],1)])],2)],1)]):e._e()],1)],1)])},staticRenderFns:[]};var u={name:"resetPwd",components:{ResetPwdForm:r("VU/8")(c,l,!1,function(e){r("/Ie8")},"data-v-024e3638",null).exports}},d={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("vue-particles",{staticClass:"login-background",attrs:{color:"#97D0F2",particleOpacity:.7,particlesNumber:50,shapeType:"circle",particleSize:4,linesColor:"#97D0F2",linesWidth:1,lineLinked:!0,lineOpacity:.4,linesDistance:150,moveSpeed:3,hoverEffect:!0,hoverMode:"grab",clickEffect:!0,clickMode:"push"}}),this._v(" "),t("reset-pwd-form")],1)},staticRenderFns:[]};var m=r("VU/8")(u,d,!1,function(e){r("JHQ0")},"data-v-60c88eba",null);t.default=m.exports},JHQ0:function(e,t){}});
//# sourceMappingURL=14.446351ad5ec0adcc8a60.js.map