webpackJsonp([10],{HAEU:function(e,t){},Juaq:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Neex"),n=a("Xxa5"),s=a.n(n),i=a("exGp"),c=a.n(i),o=a("RwfU"),u=a("Er6Z"),l={name:"dbManager",data:function(){return{allAlign:null,tableData:[],inputForm:{Name:""},isShow:!1,row:[],rules:{Name:[{required:!0,message:"请输入数据库名称",trigger:"blur"},{pattern:/^[0-9a-zA-Z_]+$/,message:"只支持英文、数字和下划线",trigger:"blur"}]},queryForm:{query:""}}},created:function(){this.init()},methods:{init:function(){var e=this;return c()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.get("/api/db/search",{params:{query_name:""}});case 3:200!==(a=t.sent).data.code?Object(o.a)(a.data.msg):e.tableData=a.data.data,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),Object(o.a)(t.t0.message);case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()},insertEvent:function(){this.isShow=!0},removeEvent:function(){var e=this;return c()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.$refs.xTable.getCurrentRecord()){t.next=3;break}return t.abrupt("return",Object(o.a)("请选择要删除的数据库"));case 3:e.$confirm("此操作将永久删除数据库,是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(c()(s.a.mark(function t(){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.delete("/api/db/delete",{params:{db_name:a.db_name}});case 3:if(200===(r=t.sent).data.code){t.next=8;break}Object(u.a)(r.data),t.next=11;break;case 8:return e.$message.success(r.data.msg),t.next=11,e.init();case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),Object(o.a)(t.t0.message);case 16:case"end":return t.stop()}},t,e,[[0,13]])})));case 4:case"end":return t.stop()}},t,e)}))()},onSubmit:function(){var e,t=this;this.$refs.ruleForm.validate((e=c()(s.a.mark(function e(a){var r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,t.$http.post("/api/db/add",null,{params:{db_name:t.inputForm.Name}});case 5:if(r=e.sent,t.isShow=!1,200===r.data.code){e.next=11;break}Object(u.a)(r.data),e.next=15;break;case 11:return t.$message.success(r.data.msg),e.next=14,t.init();case 14:t.inputForm.Name="";case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),Object(o.a)(e.t0.message);case 20:case"end":return e.stop()}},e,t,[[2,17]])})),function(t){return e.apply(this,arguments)}))},onQuery:function(){var e=this;return c()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.get("/api/db/get",{params:{db_name:e.queryForm.query}});case 3:200!==(a=t.sent).data.code?Object(u.a)(a.data):(e.$message.success(a.data.msg),e.tableData=a.data.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),Object(o.a)(t.t0.message);case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()},dispatch:function(){this.$refs.ruleForm.resetFields(),this.isShow=!1}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tableBody"},[a("el-form",{staticStyle:{"text-align":"right"},attrs:{inline:!0},model:{value:e.queryForm,callback:function(t){e.queryForm=t},expression:"queryForm"}},[a("el-form-item",[a("el-input",{attrs:{clearable:!0,placeholder:"请输入数据库名称"},model:{value:e.queryForm.query,callback:function(t){e.$set(e.queryForm,"query",t)},expression:"queryForm.query"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onQuery}},[e._v("查询")])],1)],1),e._v(" "),a("vxe-toolbar",{attrs:{perfect:""},scopedSlots:e._u([{key:"buttons",fn:function(){return[a("div",{staticStyle:{"text-align":"left"}},[a("vxe-button",{attrs:{size:"mini",icon:"el-icon-plus",status:"success",content:"新增"},on:{click:function(t){return e.insertEvent()}}}),e._v(" "),a("vxe-button",{attrs:{size:"mini",icon:"el-icon-delete",status:"success",content:"删除"},on:{click:function(t){return e.removeEvent()}}}),e._v(" "),a("vxe-button",{attrs:{size:"mini",content:"导出"},on:{click:function(t){return e.$refs.xTable.exportData()}}})],1)]},proxy:!0}])}),e._v(" "),a("vxe-table",{ref:"xTable",attrs:{border:"","print-config":{},"export-config":{},"show-header-overflow":"","show-overflow":"",align:e.allAlign,"row-config":{isCurrent:!0,isHover:!0},"radio-config":{highlight:!0},data:e.tableData}},[a("vxe-column",{attrs:{field:"db_name",title:"数据库名称"}}),e._v(" "),a("vxe-column",{attrs:{field:"tables",title:"表数量"}})],1),e._v(" "),a("el-dialog",{staticClass:"dialog",attrs:{"close-on-click-modal":!1,visible:e.isShow},on:{close:e.dispatch,"update:visible":function(t){e.isShow=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.inputForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"数据库名称",prop:"Name"}},[a("el-input",{attrs:{placeholder:"数据库名称仅支持英文、下划线和数字"},model:{value:e.inputForm.Name,callback:function(t){e.$set(e.inputForm,"Name",t)},expression:"inputForm.Name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:e.dispatch}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var d={name:"dbPage",components:{DbManager:a("VU/8")(l,m,!1,function(e){a("SmKu")},"data-v-dddeaf3c",null).exports,pageHead:r.a}},p={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("page-head",{staticClass:"nav"}),this._v(" "),t("el-container",[t("el-card",[t("db-manager")],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(d,p,!1,function(e){a("HAEU")},"data-v-56b98958",null);t.default=f.exports},SmKu:function(e,t){}});
//# sourceMappingURL=10.c67320132ce1e010f572.js.map