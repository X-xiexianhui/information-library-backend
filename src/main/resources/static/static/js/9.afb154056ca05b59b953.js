webpackJsonp([9],{L8DL:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Xxa5"),n=a.n(r),o=a("exGp"),s=a.n(o),i=a("RwfU"),c=a("mtWM"),l=a.n(c),u={name:"formList",data:function(){return{toolBarConfig:{slots:{buttons:"toolbar_buttons"}},form_name:"",dialogVisible:!1,searchName:"",tablePage:{currentPage:1,pageSize:10},tableColumn:[{field:"tb_name",title:"数据表"},{field:"form_name",title:"表单名称"}],tableData:[]}},created:function(){this.query("")},methods:{query:function(e){var t=this;return s()(n.a.mark(function a(){var r;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$http.get("/api/form/list",{params:{tb_name:e}});case 3:200!==(r=a.sent).data.code?Object(i.a)(r.data.msg):t.tableData=r.data.data,a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),Object(i.a)(a.t0);case 10:case"end":return a.stop()}},a,t,[[0,7]])}))()},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.tablePage.currentPage=t,this.tablePage.pageSize=a},renameEvent:function(){var e=this.$refs.formTable.getCurrentRecord();if(console.log(e),!e)return Object(i.a)("请先选择需要重命名的表单");this.dialogVisible=!0},closeEvent:function(){this.dialogVisible=!1,this.form_name=""},save:function(){var e=this;return s()(n.a.mark(function t(){var a,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e.form_name){t.next=2;break}return t.abrupt("return",Object(i.a)("请输入表单名称"));case 2:return t.prev=2,a=e.$refs.formTable.getCurrentRecord(),t.next=6,l.a.post("/api/form/rename",{old_name:a.form_name,new_name:e.form_name,form_id:a.form_id});case 6:200!==(r=t.sent).data.code?Object(i.a)(r.data.msg):(e.tableData=r.data.data,e.closeEvent()),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),Object(i.a)(t.t0.message);case 13:case"end":return t.stop()}},t,e,[[2,10]])}))()},goToEdit:function(){var e=this.$refs.formTable.getCurrentRecord();console.log(e);var t=this.$router.resolve({path:"/form/edit",query:{form_id:e.form_id}});window.open(t.href,"_blank")}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("vxe-grid",{ref:"formTable",attrs:{border:"",resizable:"","toolbar-config":e.toolBarConfig,"row-config":{isCurrent:!0},columns:e.tableColumn,data:e.tableData},scopedSlots:e._u([{key:"toolbar_buttons",fn:function(){return[a("vxe-input",{attrs:{placeholder:"请输入数据表名称",clearable:""},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}}),e._v(" "),a("vxe-button",{attrs:{status:"primary"},on:{click:function(t){return e.query(e.searchName)}}},[e._v("搜索")]),e._v(" "),a("vxe-button",{attrs:{status:"success"},on:{click:e.renameEvent}},[e._v("重命名")]),e._v(" "),a("vxe-button",{attrs:{status:"success"},on:{click:e.goToEdit}},[e._v("修改表单")]),e._v(" "),a("vxe-button",{on:{click:function(t){return e.$refs.formTable.exportData()}}},[e._v("导出")])]},proxy:!0},{key:"pager",fn:function(){return[a("vxe-pager",{attrs:{layouts:["Sizes","PrevJump","PrevPage","Number","NextPage","NextJump","FullJump","Total"],"current-page":e.tablePage.currentPage,"page-size":e.tablePage.pageSize,total:e.tableData.length},on:{"update:currentPage":function(t){return e.$set(e.tablePage,"currentPage",t)},"update:current-page":function(t){return e.$set(e.tablePage,"currentPage",t)},"update:pageSize":function(t){return e.$set(e.tablePage,"pageSize",t)},"update:page-size":function(t){return e.$set(e.tablePage,"pageSize",t)},"page-change":e.handlePageChange}})]},proxy:!0}])}),e._v(" "),a("el-dialog",{staticStyle:{width:"70%",margin:"auto"},attrs:{title:"请输入表单新名称",visible:e.dialogVisible,"before-close":e.closeEvent},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-input",{attrs:{placeholder:"请输入表单名称，支持中英文"},model:{value:e.form_name,callback:function(t){e.form_name=t},expression:"form_name"}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeEvent}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var m=a("VU/8")(u,f,!1,function(e){a("Xzyv")},"data-v-6b2a8236",null).exports,d={name:"formPage",components:{PageHead:a("Neex").a,FormList:m}},g={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("page-head",{staticClass:"nav"}),this._v(" "),t("el-container",[t("el-card",[t("form-list",{staticStyle:{width:"80%",margin:"auto"}})],1)],1)],1)},staticRenderFns:[]};var b=a("VU/8")(d,g,!1,function(e){a("Of+j")},"data-v-734113c1",null);t.default=b.exports},"Of+j":function(e,t){},Xzyv:function(e,t){}});
//# sourceMappingURL=9.afb154056ca05b59b953.js.map