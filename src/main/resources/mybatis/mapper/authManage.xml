<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gxu.informationLibrary.dao.authDao">
    <select id="getAuth" resultType="com.gxu.informationLibrary.entity.roleAuth">
        select role_name, form_name, `add`, del, search, editAuth
        from role_auth,
             role_info,
             form_info
        where role_auth.role_id = role_info.role_id
          and form_info.form_id = role_auth.form_id
          and role_name like concat('%', #{role_name}, '%');
    </select>
    <update id="editAuth">
        update role_auth
        set ${col_name}=#{value};
    </update>
    <select id="queryByName" resultType="com.gxu.informationLibrary.entity.roleAuth">
        select role_name, form_name, `add`, del, search, editAuth
        from role_auth,
             role_info,
             form_info
        where role_auth.role_id = role_info.role_id
          and role_name = #{role_name}
          and form_info.form_id = role_auth.form_id;
    </select>
    <insert id="addUserAuth">
        insert into role_auth(role_id, form_id, `add`, del, search, editAuth)
        VALUES
        <foreach collection="roleList" index="roleIndex" item="roleItem" separator=",">
            <foreach collection="formList" item="formItem" index="formIndex" separator=",">
                (#{roleItem},#{formItem},'a1','d1','s1','u1')
            </foreach>
        </foreach>
        ;
    </insert>
</mapper>